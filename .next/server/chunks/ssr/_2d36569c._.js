module.exports=[130854,a=>{"use strict";let b,c,d;var e=a.i(572131);let f=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},g=a=>{let b=a?f(a):f,c=a=>(function(a,b=a=>a){let c=e.default.useSyncExternalStore(a.subscribe,e.default.useCallback(()=>b(a.getState()),[a,b]),e.default.useCallback(()=>b(a.getInitialState()),[a,b]));return e.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},h=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>h(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>h(b)(a)}}},i=(b?g(b):g)((c=(a,b)=>({items:[],addItem:b=>a(a=>a.items.find(a=>a.id===b.id)?{items:a.items.map(a=>a.id===b.id?{...a,quantity:a.quantity+1}:a)}:{items:[...a.items,{...b,quantity:1}]}),removeItem:b=>a(a=>({items:a.items.filter(a=>a.id!==b)})),updateQuantity:(b,c)=>a(a=>({items:a.items.map(a=>a.id===b?{...a,quantity:c}:a)})),clearCart:()=>a({items:[]}),getTotalItems:()=>b().items.reduce((a,b)=>a+b.quantity,0),getTotalPrice:()=>b().items.reduce((a,b)=>a+b.price*b.quantity,0)}),d={name:"midas-cart"},(a,b,e)=>{let f,g={storage:function(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var b;let d=a=>null===a?null:JSON.parse(a,void 0),e=null!=(b=c.getItem(a))?b:null;return e instanceof Promise?e.then(d):d(e)},setItem:(a,b)=>c.setItem(a,JSON.stringify(b,void 0)),removeItem:a=>c.removeItem(a)}}(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...d},i=!1,j=new Set,k=new Set,l=g.storage;if(!l)return c((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},b,e);let m=()=>{let a=g.partialize({...b()});return l.setItem(g.name,{state:a,version:g.version})},n=e.setState;e.setState=(a,b)=>(n(a,b),m());let o=c((...b)=>(a(...b),m()),b,e);e.getInitialState=()=>o;let p=()=>{var c,d;if(!l)return;i=!1,j.forEach(a=>{var c;return a(null!=(c=b())?c:o)});let e=(null==(d=g.onRehydrateStorage)?void 0:d.call(g,null!=(c=b())?c:o))||void 0;return h(l.getItem.bind(l))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(c=>{var d;let[e,h]=c;if(a(f=g.merge(h,null!=(d=b())?d:o),!0),e)return m()}).then(()=>{null==e||e(f,void 0),f=b(),i=!0,k.forEach(a=>a(f))}).catch(a=>{null==e||e(void 0,a)})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(l=a.storage)},clearStorage:()=>{null==l||l.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:a=>(j.add(a),()=>{j.delete(a)}),onFinishHydration:a=>(k.add(a),()=>{k.delete(a)})},g.skipHydration||p(),f||o}));a.s(["useCart",0,i],130854)},112732,810788,a=>{"use strict";var b,c="clover";"".concat("https://js.stripe.com","/").concat(c,"/stripe.js");var d=function(a,b){a&&a._registerWrapper&&a._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:b})},e=null,f=function(a,b,e){if(null===a)return null;var f,g=b[0].match(/^pk_test/),h=3===(f=a.version)?"v3":f;g&&h!==c&&console.warn("Stripe.js@".concat(h," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=a.apply(void 0,b);return d(i,e),i},g=!1,h=function(){return b?b:b=(null!==e?e:(e=new Promise(function(a,b){a(null)})).catch(function(a){return e=null,Promise.reject(a)})).catch(function(a){return b=null,Promise.reject(a)})};Promise.resolve().then(function(){return h()}).catch(function(a){g||console.warn(a)});var i=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g=!0;var d=Date.now();return h().then(function(a){return f(a,b,d)})};a.s(["loadStripe",()=>i],810788),a.s([],112732)},234805,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(130854);a.i(112732);let e=(0,a.i(810788).loadStripe)("REPLACE_WITH_STRIPE_PUBLISHABLE_KEY");function f(){let{items:a,updateItemQuantity:f,removeFromCart:g,cartTotal:h,clearCart:i}=(()=>{let{items:a,addItem:b,removeItem:e,updateQuantity:f,clearCart:g,getTotalItems:h,getTotalPrice:i}=(0,d.useCart)(),[j,k]=(0,c.useState)(!1);return{items:a,isOpen:j,cartItemCount:h(),cartTotal:i(),addToCart:a=>{b(a)},removeFromCart:a=>{e(a)},updateItemQuantity:(a,b)=>{f(a,b)},clearCart:g,openCart:()=>k(!0),closeCart:()=>k(!1),toggleCart:()=>k(!j),setIsOpen:k}})(),j=(a,b)=>{0===b?g(a):f(a,b)},k=async()=>{try{if(!await e)return void alert("Stripe failed to load");let b=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:a.map(a=>({priceId:a.stripePriceId,quantity:a.quantity}))})}),{url:c}=await b.json();c?window.location.href=c:alert("Failed to create checkout session")}catch(a){console.error("Checkout error:",a),alert("Something went wrong during checkout")}};return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Shopping Cart"}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"Your cart is empty"}),(0,b.jsx)("a",{href:"/products",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Continue Shopping"})]}):(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-2 space-y-4",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-4 border border-gray-200 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.title}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:a.category}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["$",a.price.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>j(a.id,a.quantity-1),className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"-"}),(0,b.jsx)("span",{className:"px-3",children:a.quantity}),(0,b.jsx)("button",{onClick:()=>j(a.id,a.quantity+1),className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"+"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-semibold",children:["$",(a.price*a.quantity).toFixed(2)]}),(0,b.jsx)("button",{onClick:()=>g(a.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]},a.id))}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 h-fit",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["$",h.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Shipping"}),(0,b.jsx)("span",{children:h>=99?"FREE":"$9.99"})]}),(0,b.jsx)("div",{className:"border-t pt-2",children:(0,b.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["$",(h+(h>=99?0:9.99)).toFixed(2)]})]})})]}),(0,b.jsx)("button",{className:"w-full bg-blue-600 text-white py-2 rounded mt-4 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:0===a.length,onClick:k,children:"Proceed to Checkout"})]})]})]})}a.s(["default",()=>f],234805)}];

//# sourceMappingURL=_2d36569c._.js.map