(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,114754,e=>{"use strict";let t,r,i;var n=e.i(271645);let a=e=>{let t,r=new Set,i=(e,i)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=i?i:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,a={setState:i,getState:n,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(i,n,a);return a},s=e=>{let t=e?a(e):a,r=e=>(function(e,t=e=>e){let r=n.default.useSyncExternalStore(e.subscribe,n.default.useCallback(()=>t(e.getState()),[e,t]),n.default.useCallback(()=>t(e.getInitialState()),[e,t]));return n.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>l(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>l(t)(e)}}},o=(t?s(t):s)((r=(e,t)=>({items:[],addItem:t=>e(e=>e.items.find(e=>e.id===t.id)?{items:e.items.map(e=>e.id===t.id?{...e,quantity:e.quantity+1}:e)}:{items:[...e.items,{...t,quantity:1}]}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),updateQuantity:(t,r)=>e(e=>({items:e.items.map(e=>e.id===t?{...e,quantity:r}:e)})),clearCart:()=>e({items:[]}),getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0)}),i={name:"midas-cart"},(e,t,n)=>{let a,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let i=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(i):i(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...i},o=!1,d=new Set,c=new Set,u=s.storage;if(!u)return r((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...t)},t,n);let p=()=>{let e=s.partialize({...t()});return u.setItem(s.name,{state:e,version:s.version})},m=n.setState;n.setState=(e,t)=>(m(e,t),p());let h=r((...t)=>(e(...t),p()),t,n);n.getInitialState=()=>h;let g=()=>{var r,i;if(!u)return;o=!1,d.forEach(e=>{var r;return e(null!=(r=t())?r:h)});let n=(null==(i=s.onRehydrateStorage)?void 0:i.call(s,null!=(r=t())?r:h))||void 0;return l(u.getItem.bind(u))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var i;let[n,l]=r;if(e(a=s.merge(l,null!=(i=t())?i:h),!0),n)return p()}).then(()=>{null==n||n(a,void 0),a=t(),o=!0,c.forEach(e=>e(a))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{s={...s,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},s.skipHydration||g(),a||h}));e.s(["useCart",0,o],114754)},540259,911860,e=>{"use strict";var t,r="clover",i="https://js.stripe.com",n="".concat(i,"/").concat(r,"/stripe.js"),a=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,s=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,l=function(){for(var e=document.querySelectorAll('script[src^="'.concat(i,'"]')),t=0;t<e.length;t++){var r,n=e[t];if(r=n.src,a.test(r)||s.test(r))return n}return null},o=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(n).concat(t);var i=document.head||document.body;if(!i)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},d=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:t})},c=null,u=null,p=null,m=function(e,t,i){if(null===e)return null;var n,a=t[0].match(/^pk_test/),s=3===(n=e.version)?"v3":n;a&&s!==r&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(r,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,t);return d(l,i),l},h=!1,g=function(){return t?t:t=(null!==c?c:(c=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var r,i=l();i?i&&null!==p&&null!==u&&(i.removeEventListener("load",p),i.removeEventListener("error",u),null==(r=i.parentNode)||r.removeChild(i),i=o(null)):i=o(null),p=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},u=function(e){t(Error("Failed to load Stripe.js",{cause:e}))},i.addEventListener("load",p),i.addEventListener("error",u)}catch(e){t(e);return}})).catch(function(e){return c=null,Promise.reject(e)})).catch(function(e){return t=null,Promise.reject(e)})};Promise.resolve().then(function(){return g()}).catch(function(e){h||console.warn(e)});var v=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];h=!0;var i=Date.now();return g().then(function(e){return m(e,t,i)})};e.s(["loadStripe",()=>v],911860),e.s([],540259)},49785,e=>{"use strict";var t=e.i(843476);e.i(540259);var r=e.i(911860),i=e.i(114754),n=e.i(271645);let a=(0,r.loadStripe)("REPLACE_WITH_STRIPE_PUBLISHABLE_KEY");function s(){let{items:e,clearCart:r}=(0,i.useCart)(),[s,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)("cart"),[c,u]=(0,n.useState)({name:"",street1:"",city:"",state:"",zip:"",country:"US"}),[p,m]=(0,n.useState)([]),[h,g]=(0,n.useState)(""),[v,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{0===e.length&&(window.location.href="/cart")},[e]);let y=async()=>{if(c.name&&c.street1&&c.city&&c.state&&c.zip){f(!0);try{let t=await fetch("/api/shipping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:c,items:e.map(e=>({title:e.title,quantity:e.quantity,price:e.price}))})}),r=await t.json();r.shippingOptions&&(m(r.shippingOptions),g(r.shippingOptions[0]?.id||""))}catch(e){console.error("Shipping calculation failed:",e)}f(!1)}},b=async()=>{l(!0),await a,e.reduce((e,t)=>e+t.price*t.quantity,0);let t=p.find(e=>e.id===h);t?.cost;let r=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.map(e=>({priceId:e.stripePriceId,quantity:e.quantity}))})}),{url:i}=await r.json();i?window.location.href=i:(alert("Failed to create checkout session"),l(!1))},x=e.reduce((e,t)=>e+t.price*t.quantity,0),j=p.find(e=>e.id===h),S=j?.cost||0,w=x+S;return"cart"===o?(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Checkout"}),(0,t.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,t.jsx)("h2",{className:"font-semibold mb-4",children:"Order Summary"}),e.map(e=>(0,t.jsxs)("div",{className:"flex justify-between py-2",children:[(0,t.jsxs)("span",{children:[e.title," × ",e.quantity]}),(0,t.jsxs)("span",{children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),(0,t.jsxs)("div",{className:"border-t pt-4 font-bold text-lg",children:["Subtotal: $",x.toFixed(2)]})]}),(0,t.jsx)("button",{onClick:()=>d("shipping"),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700",children:"Continue to Shipping"})]}):(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Checkout"}),(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-6 mb-6",children:[(0,t.jsx)("h2",{className:"font-semibold mb-4",children:"Shipping Address"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Full Name",value:c.name,onChange:e=>u({...c,name:e.target.value}),className:"w-full p-2 border rounded",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"Street Address",value:c.street1,onChange:e=>u({...c,street1:e.target.value}),className:"w-full p-2 border rounded",required:!0}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"City",value:c.city,onChange:e=>u({...c,city:e.target.value}),className:"p-2 border rounded",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"State",value:c.state,onChange:e=>u({...c,state:e.target.value}),className:"p-2 border rounded",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"ZIP Code",value:c.zip,onChange:e=>u({...c,zip:e.target.value}),className:"p-2 border rounded",required:!0}),(0,t.jsxs)("select",{value:c.country,onChange:e=>u({...c,country:e.target.value}),className:"p-2 border rounded",title:"Country",children:[(0,t.jsx)("option",{value:"US",children:"United States"}),(0,t.jsx)("option",{value:"CA",children:"Canada"})]})]}),(0,t.jsx)("button",{onClick:y,disabled:v,className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 disabled:opacity-50",children:v?"Calculating...":"Calculate Shipping"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,t.jsx)("h2",{className:"font-semibold mb-4",children:"Order Summary"}),e.map(e=>(0,t.jsxs)("div",{className:"flex justify-between py-2",children:[(0,t.jsxs)("span",{children:[e.title," × ",e.quantity]}),(0,t.jsxs)("span",{children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),p.length>0&&(0,t.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Shipping Options"}),(0,t.jsx)("div",{className:"space-y-2",children:p.map(e=>(0,t.jsxs)("label",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",name:"shipping",value:e.id,checked:h===e.id,onChange:e=>g(e.target.value),className:"mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.estimatedDays," days"]})]})]}),(0,t.jsxs)("div",{className:"font-medium",children:["$",e.cost.toFixed(2)]})]},e.id))}),(0,t.jsxs)("div",{className:"border-t pt-2 mt-2 font-semibold",children:["Shipping: $",S.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 font-bold text-lg",children:["Total: $",w.toFixed(2)]})]}),p.length>0&&(0,t.jsx)("button",{onClick:b,disabled:s||!h,className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50",children:s?"Processing...":"Pay with Stripe"})]})}e.s(["default",()=>s])}]);