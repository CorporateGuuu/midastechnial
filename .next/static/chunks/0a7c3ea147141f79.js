(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,114754,e=>{"use strict";let t,r,n;var i=e.i(271645);let a=e=>{let t,r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,a={setState:n,getState:i,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(n,i,a);return a},s=e=>{let t=e?a(e):a,r=e=>(function(e,t=e=>e){let r=i.default.useSyncExternalStore(e.subscribe,i.default.useCallback(()=>t(e.getState()),[e,t]),i.default.useCallback(()=>t(e.getInitialState()),[e,t]));return i.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>l(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>l(t)(e)}}},o=(t?s(t):s)((r=(e,t)=>({items:[],addItem:t=>e(e=>e.items.find(e=>e.id===t.id)?{items:e.items.map(e=>e.id===t.id?{...e,quantity:e.quantity+1}:e)}:{items:[...e.items,{...t,quantity:1}]}),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),updateQuantity:(t,r)=>e(e=>({items:e.items.map(e=>e.id===t?{...e,quantity:r}:e)})),clearCart:()=>e({items:[]}),getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0)}),n={name:"midas-cart"},(e,t,i)=>{let a,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=r.getItem(e))?t:null;return i instanceof Promise?i.then(n):n(i)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...n},o=!1,c=new Set,d=new Set,u=s.storage;if(!u)return r((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...t)},t,i);let m=()=>{let e=s.partialize({...t()});return u.setItem(s.name,{state:e,version:s.version})},p=i.setState;i.setState=(e,t)=>(p(e,t),m());let h=r((...t)=>(e(...t),m()),t,i);i.getInitialState=()=>h;let v=()=>{var r,n;if(!u)return;o=!1,c.forEach(e=>{var r;return e(null!=(r=t())?r:h)});let i=(null==(n=s.onRehydrateStorage)?void 0:n.call(s,null!=(r=t())?r:h))||void 0;return l(u.getItem.bind(u))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var n;let[i,l]=r;if(e(a=s.merge(l,null!=(n=t())?n:h),!0),i)return m()}).then(()=>{null==i||i(a,void 0),a=t(),o=!0,d.forEach(e=>e(a))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{s={...s,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},s.skipHydration||v(),a||h}));e.s(["useCart",0,o],114754)},540259,911860,e=>{"use strict";var t,r="clover",n="https://js.stripe.com",i="".concat(n,"/").concat(r,"/stripe.js"),a=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,s=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,l=function(){for(var e=document.querySelectorAll('script[src^="'.concat(n,'"]')),t=0;t<e.length;t++){var r,i=e[t];if(r=i.src,a.test(r)||s.test(r))return i}return null},o=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(i).concat(t);var n=document.head||document.body;if(!n)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},c=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:t})},d=null,u=null,m=null,p=function(e,t,n){if(null===e)return null;var i,a=t[0].match(/^pk_test/),s=3===(i=e.version)?"v3":i;a&&s!==r&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(r,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,t);return c(l,n),l},h=!1,v=function(){return t?t:t=(null!==d?d:(d=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var r,n=l();n?n&&null!==m&&null!==u&&(n.removeEventListener("load",m),n.removeEventListener("error",u),null==(r=n.parentNode)||r.removeChild(n),n=o(null)):n=o(null),m=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},u=function(e){t(Error("Failed to load Stripe.js",{cause:e}))},n.addEventListener("load",m),n.addEventListener("error",u)}catch(e){t(e);return}})).catch(function(e){return d=null,Promise.reject(e)})).catch(function(e){return t=null,Promise.reject(e)})};Promise.resolve().then(function(){return v()}).catch(function(e){h||console.warn(e)});var f=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];h=!0;var n=Date.now();return v().then(function(e){return p(e,t,n)})};e.s(["loadStripe",()=>f],911860),e.s([],540259)},396432,e=>{"use strict";e.i(247167);var t=e.i(843476),r=e.i(271645),n=e.i(114754);e.i(540259);let i=(0,e.i(911860).loadStripe)("REPLACE_WITH_STRIPE_PUBLISHABLE_KEY");function a(){let{items:e,updateItemQuantity:a,removeFromCart:s,cartTotal:l,clearCart:o}=(()=>{let{items:e,addItem:t,removeItem:i,updateQuantity:a,clearCart:s,getTotalItems:l,getTotalPrice:o}=(0,n.useCart)(),[c,d]=(0,r.useState)(!1);return{items:e,isOpen:c,cartItemCount:l(),cartTotal:o(),addToCart:e=>{t(e)},removeFromCart:e=>{i(e)},updateItemQuantity:(e,t)=>{a(e,t)},clearCart:s,openCart:()=>d(!0),closeCart:()=>d(!1),toggleCart:()=>d(!c),setIsOpen:d}})(),c=(e,t)=>{0===t?s(e):a(e,t)},d=async()=>{try{if(!await i)return void alert("Stripe failed to load");let t=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.map(e=>({priceId:e.stripePriceId,quantity:e.quantity}))})}),{url:r}=await t.json();r?window.location.href=r:alert("Failed to create checkout session")}catch(e){console.error("Checkout error:",e),alert("Something went wrong during checkout")}};return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Shopping Cart"}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Your cart is empty"}),(0,t.jsx)("a",{href:"/products",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Continue Shopping"})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-4",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-4 border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:e.category}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["$",e.price.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>c(e.id,e.quantity-1),className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"-"}),(0,t.jsx)("span",{className:"px-3",children:e.quantity}),(0,t.jsx)("button",{onClick:()=>c(e.id,e.quantity+1),className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"+"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold",children:["$",(e.price*e.quantity).toFixed(2)]}),(0,t.jsx)("button",{onClick:()=>s(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]},e.id))}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 h-fit",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",l.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Shipping"}),(0,t.jsx)("span",{children:l>=99?"FREE":"$9.99"})]}),(0,t.jsx)("div",{className:"border-t pt-2",children:(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",(l+(l>=99?0:9.99)).toFixed(2)]})]})})]}),(0,t.jsx)("button",{className:"w-full bg-blue-600 text-white py-2 rounded mt-4 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:0===e.length,onClick:d,children:"Proceed to Checkout"})]})]})]})}e.s(["default",()=>a],396432)}]);